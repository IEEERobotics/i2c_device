name: Dual Motor Control Cape
url: "https://github.com/Exadler/DMCC_Library"
version: 6
addresses: [0x2c,0x2d,0x2e,0x2f]

registers:
    0x00:    
      name: Status
      description: System status
      access: [read]
      type: bitfield
      writemask: 0x0f
      bits: 
        1:  # [1:0]
            length: 2
            name: ModeMotor1
            values:
                 0b00: Power
                 0b01: Position
                 0b10: Velocity
                 0b11: Fault
        3:  # [3:2]
            length: 2
            name: ModeMotor2
            values:
                 0b00: Power
                 0b01: Position
                 0b10: Velocity
                 0b11: Fault
    0x01:    
        name: Polarity
        description: Not used?
        access: [read] 
    0x02:
        name: PowerMotor1
        description: Power level for motor 1
        type: int16
        access: [read,write]
        min: -10000
        max: 10000
        default: 0
    0x04:
        name: PowerMotor2
        description: Power level for motor 2
        type: int16
        access: [read,write]
        min: -10000
        max: 10000
        default: 0
    0x06:
        name: Voltage
        description: Supply voltage
        type: int16
        access: [read]
    0x10:
        name: QEI1Position
        description: Position according the first quadrature encoder input
        type: int32
        access: [read]
    0x18:
        name: QEI1Velocity
        type: int16
        access: read
    0xff:
        name: Execute
        description: Execute changes and refresh
        type: int8
        access: [write]
        values:
            0x00: Refresh
            0x01: Set_Motor1_Power
            0x02: Set_Motor2_Power
            0x03: Set_Motor_Power
            0x11: Set_Motor1_Position
            0x12: Set_Motor2_Position
            0x13: Set_Motor_Position
            0x21: Set_Motor1_Speed
            0x22: Set_Motor2_Speed
            0x23: Set_Motor_Speed
            0x30: Clear_QEI1
            0x31: Clear_QEI2
            0x32: Clear_QEI
            0x41: EEPROM_Read_Write
            0x42: EEPROM_Read_Only
            0xff: Set_Motor_Power_Alt
        default: 0
        
meta:       
  i2c_ddl_version: 1

